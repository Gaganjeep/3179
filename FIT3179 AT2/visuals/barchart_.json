{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 420,
  "height": 420,
  "data": { "url": "data/school_sector_counts.csv" },
  "transform": [
    {"joinaggregate": [{"op": "sum", "field": "Number_of_Schools", "as": "Total"}]},
    {"calculate": "datum.Number_of_Schools / datum.Total", "as": "Pct"}
  ],
  "mark": {"type": "arc", "innerRadius": 120, "outerRadius": 200},
  "encoding": {
    "theta": {"field": "Number_of_Schools", "type": "quantitative"},
    "color": {
      "field": "Education_Sector",
      "type": "nominal",
      "scale": {
        "domain": ["Government","Catholic","Independent"],
        "range": ["#1f77b4","#d62728","#2ca02c"]
      },
      "legend": {"title": "Sector"}
    },
    "tooltip": [
      {"field": "Education_Sector", "title": "Sector"},
      {"field": "Number_of_Schools", "title": "Count"},
      {"field": "Pct", "title": "Share", "format": ".1%"}
    ]
  }
}
