{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Side-by-side bars of Attendance by Year Level for Major Cities vs Remote with a year slider.",
  "width": 900,
  "height": 600,
  "autosize": {"type": "fit", "contains": "padding"},
  "data": {
    "url": "data/remotevsmajor.csv",
    "format": {"type": "csv"}
  },
  "params": [
    {
      "name": "selectedYear",
      "value": 2022,
      "bind": {"input": "range", "min": 2016, "max": 2022, "step": 1, "name": "Select Year: "}
    }
  ],
  "transform": [
    {"filter": "datum['Calendar year'] == selectedYear"},
    {"filter": "datum['Geolocation'] == 'Major Cities' || datum['Geolocation'] == 'Remote'"}
  ],
  "mark": {"type": "bar", "cornerRadiusEnd": 2},
  "encoding": {
    "x": {
      "field": "School Year Level",
      "type": "ordinal",
      "title": "School Year Level",
      "sort": ["Year 1","Year 2","Year 3","Year 4","Year 5","Year 6","Year 7","Year 8","Year 9","Year 10"],
      "axis": {"labelFontSize": 12, "titleFontSize": 13}
    },
    "xOffset": {"field": "Geolocation"},
    "y": {
      "field": "Attendance Rate",
      "type": "quantitative",
      "title": "Attendance Rate (%)",
      "axis": {"labelFontSize": 12, "titleFontSize": 13}
    },
    "color": {
      "field": "Geolocation",
      "type": "nominal",
      "title": "Location",
      "scale": {
        "domain": ["Major Cities","Remote"],
        "range": ["#2563eb","#f43f5e"]
      }
    },
    "tooltip": [
      {"field": "School Year Level", "type": "ordinal"},
      {"field": "Geolocation", "type": "nominal"},
      {"field": "Calendar year", "type": "ordinal"},
      {"field": "Attendance Rate", "type": "quantitative", "format": ".2f"}
    ]
  },
  "config": {
    "view": {"stroke": "#e2e8f0"},
    "font": "system-ui, Segoe UI, Roboto, Arial, sans-serif",
    "legend": {"labelFontSize": 12, "titleFontSize": 13}
  }
}